@using Entities.ViewModel
@model ChangePasswordProfileVM
@{
    ViewData["Title"] = "Change Password";
}

<!-- تحميل Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<style>
    .card {
        width: 420px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 1rem;
        box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        padding: 2.5rem 2rem;
        backdrop-filter: blur(10px);
        transition: transform 0.3s ease;
    }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.25);
        }

    h3 {
        font-weight: 700;
        color: #4a4a4a;
        margin-bottom: 1.5rem;
        text-align: center;
    }

    label {
        font-weight: 600;
        color: #555;
    }

    .form-control {
        border-radius: 50px;
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        border: 1.5px solid #ddd;
        transition: border-color 0.3s ease;
    }

        .form-control:focus {
            border-color: #ffb703;
            box-shadow: 0 0 8px rgba(255, 183, 3, 0.4);
            outline: none;
        }

    /* ✨ تنسيق العين */
    .password-wrapper {
        position: relative;
    }

        .password-wrapper input {
            padding-right: 45px; /* مساحة للأيقونة */
        }

        .password-wrapper .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 1.2rem;
            color: #999;
            transition: color 0.3s ease;
        }

            .password-wrapper .toggle-password:hover {
                color: #ffb703;
            }

    .btn-warning {
        background-color: #ffb703;
        border: none;
        font-weight: 600;
        font-size: 1.1rem;
        padding: 0.75rem;
        border-radius: 50px;
        box-shadow: 0 4px 12px rgba(255, 183, 3, 0.5);
        transition: background-color 0.3s ease;
    }

        .btn-warning:hover {
            background-color: #e6a700;
            box-shadow: 0 6px 16px rgba(230, 167, 0, 0.7);
        }

    .text-danger {
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: block;
    }
</style>

<!-- ✨ هنا الكارت في النص -->
<div class="d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow">
        <h3>🔒 Change Password</h3>
        <form asp-action="ChPassword" method="post" novalidate>

            <!-- Current Password -->
            <div class="mb-4 password-wrapper">
                <label asp-for="CurrentPassword" class="form-label">Current Password</label>
                <input asp-for="CurrentPassword" type="password" class="form-control" id="currentPassword" placeholder="Enter current password" />
                <i class="bi bi-eye-slash toggle-password" data-target="currentPassword"
                   aria-label="Toggle current password visibility"></i>
                <span asp-validation-for="CurrentPassword" class="text-danger"></span>
            </div>

            <!-- New Password -->
            <div class="mb-4 password-wrapper">
                <label asp-for="NewPassword" class="form-label">New Password</label>
                <input asp-for="NewPassword" type="password" class="form-control" id="newPassword" placeholder="Enter new password" />
                <i class="bi bi-eye-slash toggle-password" data-target="newPassword"
                   aria-label="Toggle new password visibility"></i>
                <span asp-validation-for="NewPassword" class="text-danger"></span>
            </div>

            <!-- Confirm Password -->
            <div class="mb-4 password-wrapper">
                <label asp-for="ConfirmPassword" class="form-label">Confirm Password</label>
                <input asp-for="ConfirmPassword" type="password" class="form-control" id="confirmPassword" placeholder="Confirm new password" />
                <i class="bi bi-eye-slash toggle-password" data-target="confirmPassword"
                   aria-label="Toggle confirm password visibility"></i>
                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
            </div>

            <button type="submit" class="btn btn-warning w-100 shadow-sm">
                <i class="bi bi-shield-lock me-2"></i> Update Password
            </button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".toggle-password").forEach(icon => {
                icon.addEventListener("click", function () {
                    const input = document.getElementById(this.dataset.target);
                    if (input.type === "password") {
                        input.type = "text";
                        this.classList.replace("bi-eye-slash", "bi-eye");
                    } else {
                        input.type = "password";
                        this.classList.replace("bi-eye", "bi-eye-slash");
                    }
                });
            });
        });
    </script>
}
